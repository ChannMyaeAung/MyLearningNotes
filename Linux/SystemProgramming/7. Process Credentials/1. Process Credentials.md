# Process Credentials

- Linux process credentials are the set of identifiers and associated permission sets that determine what operations a process is allowed to perform. 
- These credentials are stored in the process's task structure (commonly in the kernel’s task_struct) and play a crucial role in access control and security enforcement. 

## Key Components of Process Credentials

1. **User IDs:**
   - **Real User ID (UID):**
     - This is the actual user who started the process.
     -  It’s used for accounting and some security checks.
   - **Effective User ID (EUID):**
     - This ID determines the privileges the process has while running. 
     - It is often the same as the real UID, but can change when setuid programs are executed.
   - **Saved Set-User ID:**
     - When a process with setuid privileges executes a new program, its effective UID may change; the saved set-user ID allows it to regain its elevated privileges if needed.
2. **Group IDs:**
   - **Real Group ID (GID):**
     - This is the primary group of the user that started the process.
   - **Effective Group ID (EGID):**
     - Similar to the EUID, this determines the group-based privileges for the process.
   - **Supplementary Groups:**
     - Processes can belong to additional groups that grant them extra permissions. 
     - This list is used to check group-based file permissions and resource access.
3. **Capabilities:**
   - **Linux Capabilities:**
     - Beyond traditional UID/GID checks, Linux divides the all-powerful root privileges into smaller, distinct units called capabilities. 
     - These include permissions like binding to low-numbered ports, overriding file permissions, and more. 
     - A process’s capability sets (such as the permitted, effective, inheritable, bounding, and ambient sets) determine its fine-grained access rights.

### How Credentials Are Managed

- **Inheritance on Process Creation:**
  - When a new process is created via a fork, it inherits the credentials of its parent. 
  - During an `execve` system call, however, these credentials can be modified—especially if the executable file has setuid or setgid bits set.
- **System Calls and API:**
  - Linux provides various system calls (like `getuid()`, `geteuid()`, `setuid()`, and their group counterparts) that allow processes to query and modify their credentials within permitted boundaries.
- **Security Enforcement:**
  - The kernel uses process credentials during permission checks (e.g., when accessing files, using system resources, or making system calls) to ensure that processes do not exceed their allowed privileges.

## Summary

- Process credentials in Linux encapsulate both user and group IDs along with advanced capability sets. 
- These credentials, maintained in the kernel’s process descriptor, are fundamental to the system’s security model—they determine which files a process can access, what system calls it can execute, and how it interacts with other processes. 
- This robust model of credentials ensures that even processes that require elevated privileges (via mechanisms like setuid) can do so in a controlled and auditable manner.