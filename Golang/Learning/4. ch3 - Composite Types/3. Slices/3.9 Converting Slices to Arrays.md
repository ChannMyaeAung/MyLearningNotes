# Converting Slices to Arrays

- Often involves **copying** data because an array's size must be fixed at compile time, whereas a slice's length is dynamic. 
- We cannot directly "convert" a slice of arbitrary length into a specific array type unless their lengths match exactly under specific conditions.
- Converting a slice to an array requires allocating an array of the desired length and copying elements into it (or, in Go 1.20+, using the new slice-to-array conversion).

```go
package main

import (
	"fmt"
)

func main() {
	xSlice := []int{1, 2, 3, 4}
    
    // the size of the array must be specified at compile time.
    // it's a compile-time error to use [...] in a slice to array type conversion
	xArray := [4]int(xSlice)
	smallArray := [2]int(xSlice)
	xSlice[0] = 10
	fmt.Println("xSlice: ", xSlice)
	fmt.Println("xArray: ", xArray)
	fmt.Println("smallArray: ", smallArray)

}
```

```sh
chan@CMA:~/Go_Programming/ch1$ make
go fmt ./...
hello.go
go vet ./...
go build 
chan@CMA:~/Go_Programming/ch1$ ./hello_world
xSlice:  [10 2 3 4]
xArray:  [1 2 3 4]
smallArray:  [1 2]
```

---

- While the size of the array can be smaller than the size of the slice,
  - It cannot be bigger.
  - The compiler unfortunately cannot detect this and the code will panic at runtime if we specify an array size that's bigger than the length (not the capacity) of the slice.

```go
package main

import (
	"fmt"
)

func main() {
	xSlice := []int{1, 2, 3, 4}
	xArray := [4]int(xSlice)
	smallArray := [2]int(xSlice)
	xSlice[0] = 10
	fmt.Println("xSlice: ", xSlice)
	fmt.Println("xArray: ", xArray)
	fmt.Println("smallArray: ", smallArray)
	panicArray := [5]int(xSlice)
	fmt.Println("panicArray: ", panicArray)
}
```

```sh
chan@CMA:~/Go_Programming/ch1$ make
go fmt ./...
go vet ./...
go build 
chan@CMA:~/Go_Programming/ch1$ ./hello_world
xSlice:  [10 2 3 4]
xArray:  [1 2 3 4]
smallArray:  [1 2]
panic: runtime error: cannot convert slice with length 4 to array or pointer to array with length 5

goroutine 1 [running]:
main.main()
	/home/chan/Go_Programming/ch1/hello.go:15 +0x1da
```

---

## Using `copy`

The most straightforward, Go‚Äêidiomatic way is to declare an array of the needed size and copy into it:

```go
package main

import (
	"fmt"
)

func main() {
	a := [5]int{10, 20, 30, 40, 50}
	copySlice := make([]int, len(a))
	copy(copySlice, a[:])
	fmt.Println("Original array:", a)
	fmt.Println("Copied slice:", copySlice)
}
```

```sh
chan@CMA:~/Go_Programming/ch1$ make
go fmt ./...
hello.go
go vet ./...
go build 
chan@CMA:~/Go_Programming/ch1$ ./hello_world
Original array: [10 20 30 40 50]
Copied slice: [10 20 30 40 50]
```

---

